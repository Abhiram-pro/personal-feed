# Gorse Configuration for Cloud Deployment

[database]
# Use SQLite for simplicity (Railway provides persistent storage)
data_store = "sqlite:///var/lib/gorse/data.db"
cache_store = "sqlite:///var/lib/gorse/cache.db"

[master]
port = 8086
host = "0.0.0.0"
n_jobs = 1
meta_timeout = 10

[server]
api_key = ""  # Set via environment variable GORSE_API_KEY
default_n = 10
clock_error = 5

[recommend]
# Collaborative filtering
collaborative = "als"
replacement = false
enable_index = true
index_recall = 0.8
index_fit_epoch = 3

# Recommendation refresh
cache_size = 100
cache_expire = "72h"

# Exploration vs exploitation
explore_recommend = { popular = 0.1, latest = 0.2 }

[recommend.data_source]
positive_feedback_types = ["like", "view", "save"]
read_feedback_types = ["view"]
positive_feedback_ttl = 0
item_ttl = 0

[recommend.popular]
popular_window = "720h"  # 30 days

[recommend.user_neighbors]
neighbor_type = "similar"
enable_index = true
index_recall = 0.8
index_fit_epoch = 3

[recommend.item_neighbors]
neighbor_type = "similar"
enable_index = true
index_recall = 0.8
index_fit_epoch = 3

[recommend.collaborative]
model_fit_period = "60m"
model_search_period = "360m"
model_search_epoch = 100
model_search_trials = 10
enable_model_size_search = false

[recommend.replacement]
enable_replacement = true
positive_replacement_decay = 0.8
read_replacement_decay = 0.6

[recommend.offline]
check_recommend_period = "1m"
refresh_recommend_period = "24h"
enable_latest_recommend = true
enable_popular_recommend = true
enable_user_based_recommend = true
enable_item_based_recommend = true
enable_collaborative_recommend = true
enable_click_through_prediction = false
explore_latest_num = 10

[recommend.online]
fallback_recommend = ["latest", "popular"]
num_feedback_fallback_item_based = 10
